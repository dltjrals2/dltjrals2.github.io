---
title: "[Network] WAN, HDLC, 프레임 릴레이 개념 정리"

categories:
  - Network
tags:
  - [Network, WAN, HDLC, Frame relay]

toc:  true
toc_sticky: true

date: 2021-10-11
last_modified_at: 2021-10-11
---

## 10. 세상은 넓고 네트워킹은 계속된다.  

### 1. WAN은 어렵다?  

우리 곁의 WAN은 바로 전화기이다. 하루에도 몇 번씩 올리는 휴대폰, 그리고 가정과 사무실에 한 대씩 자리하고 있는 유선 전화기, 팩스, 모뎀 같은 것들이 모두 WAN 장비이다.  

WAN이란, 한마디로 내가 직접 네트워크 케이블을 깔아서 통신을 연결할 수 없을 때 사용하는 네트워킹 방식이다.  

Wide Area Network 라는 말처럼 넓은 지역에서는 네트워킹을 하기 위해 직접 케이블을 설치해서 통신한다는 것이 쉽지도 않은 뿐만 아니라 비용 측면에서도 결코 효율적이지 못하다.  

서울에 사는 사람이 부산에 사는 친구와 전화를 하겠다고 서울에서 부산까지 전화 케이블을 까는것과 마찬가지이다. 그때는 차라리 전화국을 통해 전화를 하는 것이 더 경제적이라는 것이다.  

마찬가지로 넓은 지역의 네트워킹에서도 중간에 통신 회사를 통해서 네트워킹을 구축하게 되는데, 이게 바로 가장 일반적인 WAN의 구성이다.  

WAN은 사용하는 목적, 사용로, 거리, 방법 등에 따라 다양한 종류가 있다. WAN이 어려운 이유 중의 하나도 바로 WAN의 구현 방법이 여러 가지이기 때문일 것이다.  

WAN의 방법도 다음 3가지 정도로 구분이 가능하다.  

- 전용선 방식(Leased Line) : 이 방식은 말 그대로 전화국과 같은 통신업자에게 통신회선을 임대받아서 쓰는 방식이다. 예를 들어 서울에서 부산까지 통신을 해야 한다면 통신사업자가 서울에서 부산까지 이미 설치해 놓은 회선 중 하나를 우리는 돈을 내고 대여해서 쓰는 것이다.  
- 회선 스위칭 방식(Circuit Switched) : 내가 통신을 하는 순간에만 나에게 필요한 회선을 열어주고 끝나면 회수하는 방식이다. 가장 일반적인 것이 전화이다.  
- 패킷 스위칭 방식(Packet Switched) : 패킹 스위칭에서는 우리가 통신하는 순간에도 우리에게 통신회선 전체를 빌려준 것이 아니다. 말 그대로 패킷 하나하나가 나뉘어서 통신회선을 타고 목적지까지 전달되는 방식이기 때문에 엄밀히 말하면 통신 회선을 다른 사람들과 나눠 쓰는 방식이 패킷 스위칭이다.  

### 2. HDLC보다 괜찮은 PPP  

시리얼 라인에서 주로 사용하는 HDLC(High-level Data Link Control)에 대해서 알아보자.  

PPP는 여러 가지 프로토콜을 통합해서 인캡슐레이션하는 기능, 다양한 보안 기능이 있어 HDLC보다 효과적이다.  

특히 시스코 라우터의 시리얼 라인에서 디폴트로 사용하는 HDLC는 시스코만의 방식으로 표준 HDLC 프로토콜이 아니다.  

PPP(Point-to-Point) 프로토콜은 WAN에서 가장 일반적인, 그리고 가장 괜찮은 인캡슐레이션 방식이다. 물론 시스코 장비를 쓰다 보면 전용선 같은 시리얼 라인에서는 주로 HDLC를 사용하게 되지만, ISDN 방식에서나 모뎀 접속에서는 거의 대부분의 접속을 PPP를 이용해서 구현하게 된다.  

PPP는 강력한 보안기능과 여러 가지 네트워크 계층 프로토콜을 한꺼번에 지원하는 장점을 가진 표준 프로토콜이다.  

PPP가 멀티프로토콜을 지원하고 강력한 보안기능을 지원하는 것은 NCP와 LCP때문이다.  

NCP(Network Control Protocol)은 IP, IPX, AppleTalk 등 멀티프로토콜 지원을 책임지고 있다.  

LCP(Link Control Protocol)는 링크 접속에서의 보안, 에러 체크, 압축 기능 및 멀티링크 PPP와 같은 다양한 접속 옵션을 제공한다.  

일반적으로 LCP를 주목하는 이유는 보안기능 때문이다. LCP는 여러 가지 기능 중에서 보안기능을 제공함으로써 안전한 PPP 통신을 책임진다.  

LCP의 보안인증 과정은 데이터 링크 계층의 세션을 맺고 나서 네트워크 계층 간의 통신이 일어나기 직전에 발생한다.  

다시 한번 정리하면 먼저 데이터 링크 계층을 서로 연결하고, 그다음에 보안인증을 거친 후 보안인증 과정을 무사히 마치면 마지막으로 네트워크 계층을 서로 연결하게 된다.  

PPP의 대표적인 보안인증 방법인 PAP와 CHAP를 알아보자.  

PAP(PPP Authentication Protocol 또는 Password Authentication Protocol)은 간편하면서도 가장 일반적인 패스워드 확인법이다.  

PAP에서 접속을 원하는 라우터는 자신의 Host Name과 Password를 실어서 상대방 라우터에 보내고, 이를 받은 상대방 라우터는 방금 받은 Host Name/Password 자료와 자신이 보유하고 있는 Username/Password 자료를 비교해서 같은 접속을 허가하고, 틀리면 접속을 막는 방식이다.  

PAP는 간단하다는 장점이 있지만 호스트 이름과 암호가 그대로 네트워크를 타고 이동하기 때문에 중간에서 해킹에 노출될 가능성이 있다.  

CHAP(Challenge Handshake Authentication Protocol)에 대해서 알아보자.  

PAP와 비교했을 때 2가지 특징이 있다. 첫 번째는 PAP처럼 중간에 해킹을 할 수 없게 만들었다.  

두 번째는 PAP이 2-Way HandShake라면 CHAP는 3-Way Handshake 방식이다.  

라우터의 접속 요청을 받은 라우터가 챌린지라는 코드 값을 부산 라우터에 보내주고, 챌린지 값을 이용해서 패스워드를 해싱한 후 그 값을 다시 라우터에게 보내게 된다.  

이 값을 받은 라우터는 자기도 똑같은 해싱 방법으로 결과를 만들어서 자기가 만든 값과 받은 라우터의 값을 비교해서 같으면 통과시키고, 틀리면 통신을 끊는 방식이다.  

CHAP은 패스워드 자체가 네트워크로 이동하지는 않기 때문에 중간에 해킹해도 패스워드를 알 수 없다는 장점이 있다. PAP보다 훨씬 강력한 보안이다.  

### 3. 프레임 릴레이(Frame Replay)의 구성  

기존 WAN에서 전통적으로 사용하던 통신 방식은 X.25라는 방식이었다. 이 방식은 느리고 에러가 많았던 옛날이 WAN 환경에 알맞도록 여러 가지 에러 복구 기능 및 흐름 제어 기능이 들어 있다.  

하지만 프레임 릴레이 방식은 에러 복구와 흐름 제어 등의 데이터 처리 과정을 생략함으로써 보다 효율적인 데이터 전송 방법을 제공한다.  

그러니까 프레임 릴레이 방식은 X.25에 비해 빠르고 효과적이지만 에러 제어 기법은 거의 제공이 안 된다고 생각하면 된다.  

Data-Link Connection Identifier(DLCI)는 한마디로 프레임 릴레이 연결을 위한 주소라고 생각하면 된다.  

X.25 방식의 경우는 주소 지정을 위해 X.121이라는 주소 방식을 사용했는데 프레임 릴레이의 경우는 바로 DLCI라는 녀석을 사용한다.  

하나의 링크(피지컬한 링크가 아니라 논리적인 링크를 말한다.)에 하나씩의 DLCI가 배정된다. 따라서 실제 하나의 인터페이스에 여러 개의 DLCI가 있을 수 있다.  

왜냐하면 한 인터페이스가 여러 개의 논리적 링크를 가지고 있을 수 있기 때문이다.  

LMI(Local Management Interface)란 말은 DLCI 정보와 함께 설정된 PVC 정보를 알려줌으로써 인터페이스의 다양한 정보와 동작 상태 등을 제공해주는 기능이다.  

LMI는 특정 동작 상태에 관련된 정보를 인접 라우터들에게 알려줌으로써 프레임 릴레이 네트워크상의 Virtual Circuit의 상태를 쉽게 파악할 수 있게 해주는 기능을 제공해준다.  

프레임 릴레이 인터페이스의 인캡슐레이션(Encapsulation) 방식이란 프레임 릴레이망을 통과할 때 마치 캡슐로 덮어 씌우는 것처럼 포장한다고 생각하면 된다.  

다음은 LMI 값이다. 기본적으로 프레임 릴레이 구성에서는 원할한 프레임 릴레이 설정을 위해서 서비스 공급자(ISP)에게 반드시 정확한 LMI 종류를 알아봐야 한다.  

시스코 라우터의 인터페이스는 서비스 공급자의 LMI 종류와 일치하는 LMI로 세팅되어 있어야만 제대로 작동될 수 있다.  

LMI는 현재의 DLCI 값, global 또는 Local significance DLCI 값, 그리고 virtual circuit의 현재 작동 상태 등의 정보를 알려주기 위한 값이다.  

그 다음으로 꼭 해줘야 하는것이 DLCI 연결인데. 물론 프레임 릴레이의 구성에 Encapsulation 타입과 LMI만 잡아주면 Inverse ARP라는 것이 동작해서 자동으로 연결이 가능하도록 해주지만, 보통은 명령을 통해서 수동으로 설정을 하게 된다.  

### 4. ISDN의 추억  

---
**🐢 현재 공부하고 있는 `후니의 쉽게 쓴 CISCO 네트워킹 - 진강훙 저자` 의 책을 학습하며 기록 및 정리를 하기위한 내용들입니다. 🐢**
{: .notice--primary}

감사합니다.😊